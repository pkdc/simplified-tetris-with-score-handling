var e=class{constructor(e,t){this.maxX=e,this.maxY=t}get getMaxX(){return this.maxX}get getMaxY(){return this.maxY}set setMaxX(e){this.maxX=e}set setMaxY(e){this.maxY=e}removeOneLine=function(e){for(let t=0;t<this.maxY;t++){const o=document.querySelectorAll(`.y-${t}`);let s,c=[...o];console.log(c),s=c.every((e=>e.classList.contains("occupied"))),console.log("wholeLine",s),s&&(e+=100,o.forEach((e=>e.remove())))}return e};generateTable=function(){const e=document.createElement("div");e.classList.add("game-table");for(let t=0;t<this.maxY;t++)for(let o=0;o<this.maxX;o++){const s=document.createElement("div");s.classList.add("table-pixel"),s.classList.add(`x-${o}`),s.classList.add(`y-${t}`),e.append(s)}for(let t=0;t<this.maxX;t++){const o=document.createElement("div");o.classList.add("table-pixel"),o.classList.add(`x-${t}`),o.classList.add("y-20"),o.classList.add("occupied"),e.append(o)}return e}};let t=0,o=0,s=Date.now();const c=document.createElement("div");c.classList.add("score-area"),c.textContent=`round: ${t}`;const i=function(){const e=Date.now()-s,i=Math.floor(e/60/1e3%60).toString().padStart(2,"0"),n=Math.floor(e/1e3%60).toString().padStart(2,"0");c.textContent=`Score: ${o}, Round: ${t}, Time: ${i}:${n}`},n=function(e){console.log(e),o=e.removeOneLine(o),t++};class l{constructor(e,t,o,s,c,i,n,l,r,a,h){this.x1=e,this.y1=t,this.x2=o,this.y2=s,this.x3=c,this.y3=i,this.x4=n,this.y4=l,this.blockColour=r,this.shape=a,this.locked=h}fall(e,t){let o=[document.querySelector(`.x-${this.x1}.y-${this.y1}`),document.querySelector(`.x-${this.x2}.y-${this.y2}`),document.querySelector(`.x-${this.x3}.y-${this.y3}`),document.querySelector(`.x-${this.x4}.y-${this.y4}`)],s=!1;if(s=[document.querySelector(`.x-${this.x1}.y-${this.y1+1}`),document.querySelector(`.x-${this.x2}.y-${this.y2+1}`),document.querySelector(`.x-${this.x3}.y-${this.y3+1}`),document.querySelector(`.x-${this.x4}.y-${this.y4+1}`)].some((e=>e.classList.contains("occupied"))),console.log("collided",s),this.y1>=t.getMaxY-1||this.y2>=t.getMaxY-1||this.y3>=t.getMaxY-1||this.y4>=t.getMaxY-1||s){this.locked=!0;for(const e of o)e.classList.add("occupied"),e.style.background=this.blockColour;return l.newBlocks(e,t)}this.y1+=1,this.y2+=1,this.y3+=1,this.y4+=1,o.forEach((function(e){e.classList.remove("occupied")}))}mvRight(e){if(this.x1===e-1||this.x2===e-1||this.x3===e-1||this.x4===e-1)return;[document.querySelector(`.x-${this.x1+1}.y-${this.y1}`),document.querySelector(`.x-${this.x2+1}.y-${this.y2}`),document.querySelector(`.x-${this.x3+1}.y-${this.y3}`),document.querySelector(`.x-${this.x4+1}.y-${this.y4}`)].some((e=>e.classList.contains("occupied")))||(console.log(this),this.x1+=1,this.x2+=1,this.x3+=1,this.x4+=1)}mvLeft(){if(0===this.x1||0===this.x2||0===this.x3||0===this.x4)return;[document.querySelector(`.x-${this.x1-1}.y-${this.y1}`),document.querySelector(`.x-${this.x2-1}.y-${this.y2}`),document.querySelector(`.x-${this.x3-1}.y-${this.y3}`),document.querySelector(`.x-${this.x3-1}.y-${this.y3}`)].some((e=>e.classList.contains("occupied")))||(this.x1-=1,this.x2-=1,this.x3-=1,this.x4-=1)}rotate(){}erase(){let e=document.querySelector(`.x-${this.x1}.y-${this.y1}`),t=document.querySelector(`.x-${this.x2}.y-${this.y2}`),o=document.querySelector(`.x-${this.x3}.y-${this.y3}`),s=document.querySelector(`.x-${this.x4}.y-${this.y4}`);e.style.background="var(--grey)",t.style.background="var(--grey)",o.style.background="var(--grey)",s.style.background="var(--grey)"}colour(){console.log(this.x1,this.y1),console.log(this.x2,this.y2),console.log(this.x3,this.y3),console.log(this.x4,this.y4),console.log(document.querySelector(`.x-${this.x1}.y-${this.y1}`));let e=document.querySelector(`.x-${this.x1}.y-${this.y1}`),t=document.querySelector(`.x-${this.x2}.y-${this.y2}`),o=document.querySelector(`.x-${this.x3}.y-${this.y3}`),s=document.querySelector(`.x-${this.x4}.y-${this.y4}`);e.style.background=this.blockColour,t.style.background=this.blockColour,o.style.background=this.blockColour,s.style.background=this.blockColour}static generateTBlock(e){let t,o,s,c,i,l,r,a,h,y,u;n(e),console.log("maxX",e.getMaxX);const x=Math.floor(2*Math.random());switch(console.log(`generate new ${x}`),x){case 0:t=e.getMaxX/2-2,o=0,s=e.getMaxX/2-1,c=0,i=e.getMaxX/2,l=0,r=e.getMaxX/2+1,a=0,h="skyblue",y="rect",u=!1;break;case 1:t=e.getMaxX/2-1,o=0,s=e.getMaxX/2,c=0,i=e.getMaxX/2-1,l=1,r=e.getMaxX/2,a=1,h="yellow",y="sq",u=!1}return console.log(t,o),console.log(s,c),console.log(i,l),console.log(r,a),[t,o,s,c,i,l,r,a,h,y,u]}static newBlocks(e,t){return console.log("game maxX",t.getMaxX),e=new l(...l.generateTBlock(t)),console.log("shape",`${e.shape}`),console.log("locked?",`${e.locked}`),e.colour(),e}}var r=l;let a,h,y,u,x,d=!1;document.querySelector("body");const m=document.querySelector("#root"),g=document.createElement("div"),$=document.createElement("div"),S=document.createElement("div");m.append(g),m.append($),m.append(S),g.append(c);const k=new e(10,20);$.append(k.generateTable());document.addEventListener("keydown",(e=>{"ArrowDown"===e.key&&(console.log("fastDrop"),a=0),"ArrowRight"===e.key&&(console.log("Right"),console.log("Mv Right"),x.erase(),x.mvRight(k.getMaxX),x.colour()),"ArrowLeft"===e.key&&(console.log("Left"),console.log("Mv Left"),x.erase(),x.mvLeft(),x.colour())}));const q=function(e){h||(h=e),e-h>=a?(!function(){x.erase();const e=x.fall(x,k);e&&(x=e),x.colour()}(),y=requestAnimationFrame(f)):u=requestAnimationFrame(q)},f=function(){a=1e3,h=null,console.log("in run"),u=requestAnimationFrame(q),i()};document.addEventListener("keydown",(e=>{"Enter"===e.key&&(d||(d=!0,f()))})),x=r.newBlocks(x,k),i();
//# sourceMappingURL=index.ea1f8fd2.js.map
